@{
  ViewData["Title"] = "Home Page";
}
@model QuantU.Models.UserFinances;

<marquee style="background: black; position: relative;">
  <label>
      <p class="mt-2"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="lime" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
        <path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
      </svg></span>  <text id="first" style="color:white">Example Text 1</text>&emsp;</p>
  </label>
  <label>
      <p class="mt-2"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
        <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
      </svg></span>  <text id="second" style="color:white">Example Text 2</text> &emsp;</p>
  </label>
  <label>
      <p class="mt-2"><span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="lime" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
        <path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
      </svg></span>  <text id="third" style="color:white">Example Text 3</text>&emsp;</p>
  </label>
</marquee>

<script>
  const btn = document.getElementById('logOut');
  btn.addEventListener('click', function(e) {
    localStorage.clear();
  });
</script>

<script>
      var requestOptions = {
        method: 'GET'
    };

    var params = {
        api_token: 'zN4Le7hdAZLXx50HoiqfMv00RgKQzX6i7RPsycKs',
        symbols: 'msft,fb',
        limit: '50'
    };

    var esc = encodeURIComponent;
    var query = Object.keys(params)
        .map(function(k) {return esc(k) + '=' + esc(params[k]);})
        .join('&');

    fetch("https://api.marketaux.com/v1/news/all?" + query, requestOptions)
      .then(response => response.json())
      .then(result => {
                      console.log(result);
                      document.getElementById('first').innerHTML = result.data[0].title;
                      document.getElementById('second').innerHTML = result.data[1].title;
                      document.getElementById('third').innerHTML = result.data[2].title;})
      .catch(error => console.log('error', error));
</script>

<div class="container">

  <div style="text-align: center;">
    <h1>Welcome to QuantU</h1>
  </div>


  @* Form for Search() function in HomeComtroller.cs *@
      <form asp-action="Search">

    @* Search bar seen on screen 
      NOTE: see how the for and name attribute match the Search parameter name *@
      <label for="title" class="form-label">Stock search</label>
        <input name="title" class="form-control" type="text" list="datalistOptions" id="exampleDataList" placeholder="Type to search...">
        <datalist class="searchbar" id="datalistOptions">
      @using MongoDB.Driver
      @using QuantU.Models
      @{
        MongoClient client = new MongoClient("mongodb+srv://SWMG:Shawdowwizardmoneygang@swmg.hzzuvlg.mongodb.net/?retryWrites=true&w=majority");
        var builder = Builders<StockData>.Filter;
        var empty = builder.Empty;
        List<StockData> results = client.GetDatabase("SWMG").GetCollection<StockData>("StockData").Find(empty).ToList();
        List<string> stocks = new List<String>();
        foreach (StockData result in results)
        {
          stocks.Add(result.name + ", " + result.ticker);
        }
        stocks.Sort();
      }

      @foreach (string stock in stocks)
      {
              <option value='@stock'></option>
      }
        </datalist>
      </form>
<br>
  <br>

  <div class="accordion" id="accordionExample">
    <div class="accordion-item">
    <h2 class="accordion-header" id="panelsStayOpen-headingOne">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
        What is QuantU?
      </button>
    </h2>
    <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
      <div class="accordion-body">
        <strong>We make investing look easy.</strong> Getting into investing can be an intimidating task. With all the graphs and numbers on the screen, it can be confusing for someone with no trading experience to get started. QuantU makes that transition easier by giving you an area to simulate trading before diving head first into the hobby. We make it easy to create a portfolio and add stocks to them while seeing how your virtual money grows. <strong>This is not financial advice.</strong>
      </div>
    </div>
  </div>
    <div class="accordion-item">
      <h2 class="accordion-header text-center" id="headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Investment Suggestions
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample" style="">
        <div class="accordion-body">
            Hello @ViewBag.user.username!
             @{
              if(ViewBag.user.numberOfChildren > 0){
                if(ViewBag.user.eldestChildAge < 18 && ViewBag.user.numberOfChildren <= 3 && ViewBag.user.netSalary > 90000){
                  <li>Since you have children below the age of 18, please consider setting up a college fund for you children.</li>
                }
                else if(ViewBag.user.eldestChildAge < 18 && ViewBag.numberOfChildren < 5 && ViewBag.user.netSalary > 110000){
                  <li>Since you have children below the age of 18, please consider setting up a college fund for you children.</li>
                }
              }
              if(ViewBag.user.age > 60 && ViewBag.user.eldestChildAge > 25 && ViewBag.user.netSalary > 80000){
                <li>We recommend that you invest in a consistent index fund like the S&P 500 or the NASDAQ</li>
              }
              if(ViewBag.user.age <35 && ViewBag.user.age > 17 && ViewBag.user.numberOfChildren == 0){
                  <li>Based on your age, we recommend that you invest in a ROTH IRA account</li>
                }
              if(ViewBag.user.age <26 && ViewBag.user.age > 20 && ViewBag.user.numberOfChildren == 0){
                  <li>Based on your age, we recommend that you invest in a 401k account</li>
                }            
              if(ViewBag.user.age<30 && ViewBag.user.numberOfChildren == 0 && ViewBag.user.netSalary<60000){
                <li>Based on your age and income, we recommend that you focus on your well being and personal health. You may not be ready to invest just yet.</li>
              }
              }
        </div>
      </div>
    </div>
  </div>

  <br>
  <br>

  <div style="text-align: center;">
    <h2>Top Movers Past 24 Hours</h2>
  </div>

  <style>
    .card-container {
  display: flex;
  justify-content: space-between;
  padding: 20px;
}

.card {
  width: calc(33.33% - 10px);
  box-sizing: border-box;
  margin-right: 10px;
}
.card:last-child {
  margin-right: 0;
}
  </style>

  <div class="card-container">
  <div class="card">
    <svg class="bd-placeholder-img card-img-top" width="100%" height="180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Image cap" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#868e96"></rect><text x="50%" y="50%" fill="#dee2e6" dy=".3em">Stock graph</text></svg>
      <div class="card-body">
        <h5 class="card-title">Stock name</h5>
        <a href="#" class="btn btn-primary" style="background-color: #C9AAFF;">Trade now</a>
      </div>
  </div>
  <div class="card">
    <svg class="bd-placeholder-img card-img-top" width="100%" height="180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Image cap" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#868e96"></rect><text x="50%" y="50%" fill="#dee2e6" dy=".3em">Stock graph</text></svg>
      <div class="card-body">
        <h5 class="card-title">Stock name</h5>
        <a href="#" class="btn btn-primary" style="background-color: #C9AAFF;">Trade now</a>
      </div>
  </div>
  <div class="card">
    <svg class="bd-placeholder-img card-img-top" width="100%" height="180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Image cap" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#868e96"></rect><text x="50%" y="50%" fill="#dee2e6" dy=".3em">Stock graph</text></svg>
      <div class="card-body">
        <h5 class="card-title">Stock name</h5>
        <a href="#" class="btn btn-primary" style="background-color: #C9AAFF;">Trade now</a>
      </div>
  </div>
</div>
