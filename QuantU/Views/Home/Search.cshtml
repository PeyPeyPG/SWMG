@{
    ViewData["Title"] = "Stock";
}

<script>
    let token = "cfis95hr01qjvrn525t0cfis95hr01qjvrn525tg";
    let base_url = "https://finnhub.io/api/v1/stock/profile2?";
    let symbol = '@ViewBag.ticker';

    //Forms the API URL with API Token (Key) and the symbol for the stock the user wants
    let url = base_url + "symbol=" + symbol + "&token=" + token;

    //fetches url and gets JSON data attached to it
    fetch(url)
        .then(response => response.json())
        .then(data => {
            console.log(data);
            console.log(data.name);

        })
        .catch(error => console.log(error));
</script>
@*Note: Turned White since if I deleted it, the formating was off*@
<p style ="color: white;"><br>Press Control+Shift+I and travel to console to look at the values of the stock
</p>

<head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
@*Stock Information Card*@
<div class="container">
    <div class="container" style="margin-top: -20px !important;">
        <section class="mx-auto my-5" @*Stock Infomation style*@
            style="max-width: 50rem; margin-left: 0rem !important; border-radius: 20px !important;">
            <div class="card chart-card">
                <div class="card-body pb-0">
                    <h5 class="card-title font-weight-bold"></h5>
                    @*Stock Name and Date*@
                    <p class="card-text mb-4">NASDAQ: SWMG â€¢ March 22, 11:52AM</p>
                    <div class="d-flex justify-content-between">
                        @*Stock Price and Daily Informaiton*@
                        <p class="display-4 align-self-end"><span></span>159.75 USD <span
                                style="color:green; font-size: smaller;">+0.45
                                (.28%)</span></p>
                    </div>
                    @*Company Logo*@
                    <div class="logo-box"></div>
                </div>
            </div>
            @*Stock Graph*@
            <div style="height: 300px; ; background-color: gray;"></div>
        </section>
        <style>
            .logo-box {
                width: 8rem;
                height: 8rem;
                background-color: gray;
                position: absolute;
                top: 20%;
                left: 75%;
                border-radius: 10px;
            }

            .card-title {
                font-size: xx-large;
            }

            div.container {
                margin-left: 0 !important;
            }
        </style>
        @*Animation Script*@
        <script>
            const titleElement = document.querySelector('.card-title');
            const titleText = 'SWMG Corporation';
            let index = 0;
            let timeout;
            function type() {
                titleElement.textContent = titleText.slice(0, index);
                index++;

                if (index > titleText.length) {
                    clearTimeout(timeout);
                } else {
                    timeout = setTimeout(type, 100);
                }
            }

            timeout = setTimeout(type, 100);
        </script>
    </div>
</div>
</div>
@*Company Name*@
<div class="company-name"> SWMG Corporation
    <style>
        .company-name {
            color: black;
            font-size: 25px;
            position: absolute;
            width: 550px;
            top: 24%;
            left: 60%;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</div>
@*Company Information*@
<div class="company-info">
    <style>
        .company-info {
            color: black;
            font-size: 25px;
            position: absolute;
            width: 550px;
            height: 456px;
            top: 29.2%;
            left: 60%;
            background-color: gray;
        }
    </style>
</div>
@*Trade Button*@
<button class="trade-btn" id="trade-now-btn">Trade Now
    <style>
        .trade-btn {
            color: red;
            font-size: small;
            position: absolute;
            left: 25%;
            top: 30%;
            align-items: center;
            justify-content: center;
            display: inline-block;
            width: 180px;
            height: 50px;
            background: linear-gradient(to left, #c9aaff, #c9aaff);
            /*box-shadow: 0 10px 25px #c9aaff;*/
            border-radius: 50px;
            border: none;
            font-size: larger;
            font-weight: 500;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: pulsate 1.2s ease-in-out infinite both;
        }

        .trade-btn:hover {
            animation-play-state: paused;
            transform: scale(1.05);
        }
    </style>
    @*Script for Blinking Effect -> Not using since its distracting*@
    <script>
        @* var tradeBtn = document.getElementById('trade-now-btn');
            var scale = 1;
            var direction = 1;
            var intervalId = setInterval(function() {
            scale += direction * 0.005;
            if (scale > 1.1) {
            direction = -1;
            } else if (scale < 1) {
            direction = 1;
            }
            tradeBtn.style.transform = 'scale(' + scale + ')';
            }, 50);

            tradeBtn.addEventListener('mouseenter', function () {
            clearInterval(intervalId);
            this.style.transform = 'scale(1.05)';
            });

            tradeBtn.addEventListener('mouseleave', function () {
            intervalId = setInterval(function() {
            scale += direction * 0.005;
            if (scale > 1.1) {
            direction = -1;
            } else if (scale < 1) {
            direction = 1;
            }
            tradeBtn.style.transform = 'scale(' + scale + ')';
            }, 50);
            }); *@
    </script>
</button>
@*Search Bar Place Holder*@
<div>
    <input name="title" class="form-control" type="text" list="datalistOptions" id="exampleDataList">
    <datalist class="searchbar" id="datalistOptions">
    </datalist>
    <style>
        .form-control {
            border-radius: 20px;
            border-color: black;
            position: absolute;
            top: 16%;
            width: 800px;
            left: 1.5%;
        }
    </style>
    <script>
         var wordList = ["This Search Bar Doesnt Work :("];
        var randomIndex = Math.floor(Math.random() * wordList.length);
        var randomWord = wordList[randomIndex];
        var inputElem = document.querySelector('input.form-control');
        var i = 0;
        var intervalId = setInterval(function () {
            if (i < randomWord.length) {
                inputElem.placeholder += randomWord.charAt(i);
                i++;
            } else {
                clearInterval(intervalId);
            }
        }, 100);
    </script>
</div>
@*Try Another Stock (IDEA) -> Clicks and goes to a random stock page*@
<button class="try-btn" id="trade-now-btn"> Try This Stock: APPL INC 
    <style>
        .try-btn {
            font-size: small;
            position: absolute;
            left: 60%;
            top: 15%;
            align-items: center;
            justify-content: center;
            display: inline-block;
            width: 550px;
            height: 50px;
            background: linear-gradient(to left, #62c08b, #62c08b);
            /*box-shadow: 0 10px 25px #c9aaff;*/
            border-radius: 50px;
            border: none;
            font-size: larger;
            font-weight: 500;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: pulsate 1.2s ease-in-out infinite both;
        }

        .trade-btn:hover {
            animation-play-state: paused;
            transform: scale(1.05);
        }
