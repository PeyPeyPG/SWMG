@{
    ViewData["Title"] = "Stock";
}

<script>
    let token = "cfis95hr01qjvrn525t0cfis95hr01qjvrn525tg";
    let base_url = "https://finnhub.io/api/v1/stock/profile2?";
    let symbol = '@ViewBag.ticker';

    //Forms the API URL with API Token (Key) and the symbol for the stock the user wants
    let url = base_url + "symbol=" + symbol + "&token=" + token;

    //fetches url and gets JSON data attached to it
    fetch(url)
        .then(response => response.json())
        .then(data => {
            console.log(data);
            console.log(data.name);
        })
        .catch(error => console.log(error));
</script>
@*Note: Turned White since if I deleted it, the formating was off*@
<p style="color: white;"><br>Press Control+Shift+I and travel to console to look at the values of the stock
</p>

@* <head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    </head> *@

<body>

    <!--Contain for all elements-->
    <div class="container mt-5">

        <!--First row for two main sections i.e the stock card and random elements-->
        <div class="row">

            <!--
                Stock Card Column
                col is col-8 which will take up more of the screen
                bootstraps has 12 column grid col-8 takes up 8 of those so 
                this card will always be larger
            -->
            <div class="col-8">

                <!--Stock card-->
                <div class="card">

                    <!--Row for items inside stock card-->
                    <div class="card-body row">
                        <!--column containing stock name, exchange rate, price, and price change-->
                        <div class="row">
                            <div class="col">
                                <!--Stock name (the one you animated)-->
<h5 class="card-title fw-bold" style="font-size: 25px;"></h5>
<script>
                const titleElement = document.querySelector('.card-title');
                const titleText = 'SWMG Corporation';
                let index = 0;
                let timeout;
                function type() {
                    titleElement.textContent = titleText.slice(0, index);
                    index++;

                    if (index > titleText.length) {
                        clearTimeout(timeout);
                    } else {
                        timeout = setTimeout(type, 100);
                    }
                }

                timeout = setTimeout(type, 100);
            </script>
                                <!--Exchange rate, ticker, and date-->
                                <p class="card-text mb-4 fw-medium" style="font-size: 25px;" >NASDAQ: SWMG • March 22, 11:52AM</p>
                                
                                <!--price, Percent change-->
    
                            </div>
                            <!--column container button and icon-->
                        <div class="col text-center me-3">
                            <!--Buttton-->
                            <button class="trade-btn" id="trade-now-btn">Trade Now
                                <!--Your CS minus positioning-->
                                <style>
                                    .trade-btn {
                                        position: relative;
                                        left: -120%;
                                        top: 80%;
                                        color: red;
                                        font-size: small;
                                        align-items: center;
                                        justify-content: center;
                                        display: inline-block;
                                        width: 11.25rem;
                                        height: 3.125rem;
                                        background: linear-gradient(to left, #c9aaff, #c9aaff);
                                        /*box-shadow: 0 10px 25px #c9aaff;*/
                                        border-radius: 3.125rem;
                                        border: none;
                                        font-size: larger;
                                        font-weight: 500;
                                        color: #fff;
                                        text-transform: uppercase;
                                        letter-spacing: 0.063rem;
                                        animation: pulsate 1.2s ease-in-out infinite both;
                                    }

                                    .trade-btn:hover {
                                        animation-play-state: paused;
                                        transform: scale(1.05);
                                    }

                                    .logo-box {
                                        width: 10rem;
                                        height: 10rem;
                                        background-color: gray;
                                        border-radius: 0.625rem;
                                        position: relative;
                                        left: 25%;
                                        top: 20%;

                                    }
                                </style>
                            </button>
                        </div>
                            <div class="col">
                                <div class="logo-box ">
                            </div>
                            </div>
                            
                        </div>
                        @* <!--column container button and icon-->
                        <div class="col-md-8 text-center me-3">
                            <!--Buttton-->
                            <button class="trade-btn" id="trade-now-btn">Trade Now
                                <!--Your CS minus positioning-->
                                <style>
                                    .trade-btn {
                                        position: relative;
                                        left: -25%;
                                        top: 30%;
                                        color: red;
                                        font-size: small;
                                        align-items: center;
                                        justify-content: center;
                                        display: inline-block;
                                        width: 11.25rem;
                                        height: 3.125rem;
                                        background: linear-gradient(to left, #c9aaff, #c9aaff);
                                        /*box-shadow: 0 10px 25px #c9aaff;*/
                                        border-radius: 3.125rem;
                                        border: none;
                                        font-size: larger;
                                        font-weight: 500;
                                        color: #fff;
                                        text-transform: uppercase;
                                        letter-spacing: 0.063rem;
                                        animation: pulsate 1.2s ease-in-out infinite both;
                                    }

                                    .trade-btn:hover {
                                        animation-play-state: paused;
                                        transform: scale(1.05);
                                    }

                                    .logo-box {
                                        width: 10rem;
                                        height: 10rem;
                                        background-color: gray;
                                        border-radius: 0.625rem;
                                        position: relative;

                                    }
                                </style>
                            </button>

                            <!--Logo box-->
                            <div class="logo-box row-md-4">
                            </div>
                        </div> *@
                    </div>
                    <div class="row">
                    <div class="d-flex justify-content-between">
                                    <p class="display-4 align-self-end"><span></span>159.75 USD <span
                                            style="color:green; font-size: smaller;">+0.45 (.28%)</span></p>
                                </div>
                </div>
                </div>
                
            </div>
            <!--End of stock card-->

            <!--Column for search bar and random stocks-->
            <div class="col-md-4">
                <!--Search bar sizes with column-->
                <div class="mb-5">
                    <div class="searchbar">
                        <form asp-action="Search">
                            @* Search bar seen on screen
                                NOTE: see how the for and name attribute match the Search parameter name *@
                            <label for="title" class="form-label"></label>
                            <input name="title" class="form-control" type="text" list="datalistOptions"
                                id="exampleDataList" placeholder="">
                            <datalist class="searchbar" id="datalistOptions">
                                @using MongoDB.Driver
                                @using QuantU.Models
                                @{
                                    MongoClient client = new
            MongoClient("mongodb+srv://SWMG:Shawdowwizardmoneygang@swmg.hzzuvlg.mongodb.net/?retryWrites=true&w=majority");
                                    var builder = Builders<StockData>.Filter;
                                    var empty = builder.Empty;
                                    List<StockData> results =
                                    client.GetDatabase("SWMG").GetCollection<StockData>("StockData").Find(empty).ToList();
                                    List<string> stocks = new List<String>();
                                    foreach (StockData result in results)
                                    {
                                        stocks.Add(result.name + ", " + result.ticker);
                                    }
                                    stocks.Sort();
                                }
                                @foreach (string stock in stocks)
                                {
                                    <option value='@stock'></option>
                                }
                            </datalist>
                        </form>
                        <script>
                            var wordList = ["Type Here....", "Search Stock...", "Feeling Lucky...", "We Love Casting Spells... <3"];
                            var randomIndex = Math.floor(Math.random() * wordList.length);
                            var randomWord = wordList[randomIndex];
                            var inputElem = document.querySelector('input.form-control');
                            var i = 0;
                            var intervalId = setInterval(function () {
                                if (i < randomWord.length) {
                                    inputElem.placeholder += randomWord.charAt(i);
                                    i++;
                                } else {
                                    clearInterval(intervalId);
                                }
                            }, 100);
                        </script>
                    </div>
                </div>

                <!--Randome stock option 1-->
                <div class="card mb-5 mt-5">
                    <div class="card-body row d-flex">
                        <!--button-->
                        <div class="col align-content-center">
                            <button type="button" class="btn btn-success mt-5" style="position: relative; left: 20%">Try
                                This Stock</button>
                            </button>

                        </div>
                        <!--Random stock icon-->
                        <div class="col d-flex justify-content-center">
                            <div style="background-color: grey; width: 8rem; height: 8rem; border-radius: 0.625rem;">
                            </div>
                        </div>
                    </div>
                </div>

                <!--Randome stock option 1-->
                <div class="card mb-5 mt-5">
                    <div class="card-body row d-flex">
                        <!--button-->
                        <div class="col align-content-center">
                            <button type="button" class="btn btn-success mt-5" style="position: relative; left: 20%">Try
                                This Stock</button>

                        </div>
                        <!--Random stock icon-->
                        <div class="col d-flex justify-content-center">
                            <div style="background-color: grey; width: 8rem; height: 8rem; border-radius: 0.625rem;">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card mb-5 mt-5">
                    <div class="card-body row d-flex">
                        <!--button-->
                        <div class="col align-content-center">
                            <button type="button" class="btn btn-success mt-5" style="position: relative; left: 20%">Try
                                This Stock</button>
                        </div>
                        <!--Random stock icon-->
                        <div class="col d-flex justify-content-center">
                            <div style="background-color: grey; width: 8rem; height: 8rem; border-radius: 0.625rem;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>


<!-- Prev
<div class="container">
    <div class="left-screen">
@*Stock Information Card (BootStraps)*@
        <section class="mx-auto" @*Stock Infomation style*@
            style="max-width: 80rem; margin-left: 0rem; border-radius: 1.25rem;">
            <div class="card chart-card">
                <div class="card-body pb-0">
                    <h5 class="card-title font-weight-bold"></h5>
@*Stock Name and Date*@
                    <p class="card-text mb-4" style="font-size: medium">NASDAQ: SWMG • March 22, 11:52AM</p>
                    <div class="d-flex justify-content-between">
@*Stock Price and Daily Informaiton*@
                        <p class="display-4 align-self-end"><span></span>159.75 USD <span
                                style="color:green; font-size: smaller;">+0.45
                                (.28%)</span></p>
                    </div>
                </div>
@*Stock Graph*@
                <div style="height: 25.75rem; width: 75rem; background-color: gray;"></div>
@*Company Logo*@
                <div class="logo-box"></div>
            </div>
@*Animation Script*@
            <script>
                const titleElement = document.querySelector('.card-title');
                const titleText = 'SWMG Corporation';
                let index = 0;
                let timeout;
                function type() {
                    titleElement.textContent = titleText.slice(0, index);
                    index++;

                    if (index > titleText.length) {
                        clearTimeout(timeout);
                    } else {
                        timeout = setTimeout(type, 100);
                    }
                }

                timeout = setTimeout(type, 100);
            </script>
@*Trade Button *@
            <button class="trade-btn" id="trade-now-btn">Trade Now
                <style>
                    .trade-btn {
                        color: red;
                        font-size: small;
                        position: absolute;
                        left: 48%;
                        top: 20%;
                        align-items: center;
                        justify-content: center;
                        display: inline-block;
                        width: 11.25rem;
                        height: 3.125rem;3
                        background: linear-gradient(to left, #c9aaff, #c9aaff);
                        /*box-shadow: 0 10px 25px #c9aaff;*/
                        border-radius: 3.125rem;
                        border: none;
                        font-size: larger;
                        font-weight: 500;
                        color: #fff;
                        text-transform: uppercase;
                        letter-spacing: 0.063rem;
                        animation: pulsate 1.2s ease-in-out infinite both;
                    }

                    .trade-btn:hover {
                        animation-play-state: paused;
                        transform: scale(1.05);
                    }
                </style>
            </button>
        </section>
        <div class="try-stock">
            <div class="logo">
            </div>
        </div>

        <div class="searchbar">
            <div>
@* Form for Search() function in HomeComtroller.cs *@
                <form asp-action="Search">
@* Search bar seen on screen
    NOTE: see how the for and name attribute match the Search parameter name *@
                    <label for="title" class="form-label"></label>
                    <input name="title" class="form-control" type="text" list="datalistOptions" id="exampleDataList"
                        placeholder="">
                    <datalist class="searchbar" id="datalistOptions">
@using MongoDB.Driver
@using QuantU.Models
@{
    MongoClient client = new
MongoClient("mongodb+srv://SWMG:Shawdowwizardmoneygang@swmg.hzzuvlg.mongodb.net/?retryWrites=true&w=majority");
    var builder = Builders<StockData>.Filter;
    var empty = builder.Empty;
    List<StockData> results =
    client.GetDatabase("SWMG").GetCollection<StockData>("StockData").Find(empty).ToList();
    List<string> stocks = new List<String>();
    foreach (StockData result in results)
    {
        stocks.Add(result.name + ", " + result.ticker);
    }
    stocks.Sort();
}
@foreach (string stock in stocks)
{
                                <option value='@stock'></option>
}
                    </datalist>
                </form>
                <style>
                    .form-control {
                        border-radius: 1.25rem;
                        border-color: black;
                        position: absolute;
                        top: 16%;
                        width: 20rem !important;
                        left: 82%;
                    }
                </style>
                <script>
                    var wordList = ["Type Here....", "Search Stock...", "Feeling Lucky...", "We Love Casting Spells... <3"];
                    var randomIndex = Math.floor(Math.random() * wordList.length);
                    var randomWord = wordList[randomIndex];
                    var inputElem = document.querySelector('input.form-control');
                    var i = 0;
                    var intervalId = setInterval(function () {
                        if (i < randomWord.length) {
                            inputElem.placeholder += randomWord.charAt(i);
                            i++;
                        } else {
                            clearInterval(intervalId);
                        }
                    }, 100);
                </script>
            </div>
        </div>
        <div class="try-stock">
            <div class="logo">
            </div>
            <button class="try-btn" id="trade-now-btn"> Try This Stock!
                <style>
                    .try-btn {
                        font-size: small;
                        position: absolute;
                        left: 3%;
                        top: 35%;
                        align-items: center;
                        justify-content: center;
                        display: inline-block;
                        width: 10rem;
                        height: 3.125rem;
                        background: linear-gradient(to left, #62c08b, #62c08b);
                        /*box-shadow: 0 10px 25px #c9aaff;*/
                        border-radius: 3.125rem;
                        border: none;
                        font-size: larger;
                        font-weight: 500;
                        color: #fff;
                        text-transform: uppercase;
                        letter-spacing: 0.063rem;
                        animation: pulsate 1.2s ease-in-out infinite both;
                        width: 10rem;
                        height: 3.5rem;
                    }

                    .try-btn:hover {
                        animation-play-state: paused;
                        transform: scale(1.05);
                    }
                </style>
            </button>
        </div>

        <div class="try-stock2">
            <div class="logo">
            </div>
            <button class="try-btn" id="trade-now-btn"> Try This Stock!
                <style>
                    .try-btn {
                        font-size: small;
                        position: absolute;
                        left: 3%;
                        top: 35%;
                        align-items: center;
                        justify-content: center;
                        display: inline-block;
                        width: 10rem;
                        height: 3.125rem;
                        background: linear-gradient(to left, #62c08b, #62c08b);
                        /*box-shadow: 0 10px 25px #c9aaff;*/
                        border-radius: 3.125rem;
                        border: none;
                        font-size: larger;
                        font-weight: 500;
                        color: #fff;
                        text-transform: uppercase;
                        letter-spacing: 0.063rem;
                        animation: pulsate 1.2s ease-in-out infinite both;
                        width: 10rem;
                        height: 3.5rem;
                    }

                    .try-btn:hover {
                        animation-play-state: paused;
                        transform: scale(1.05);
                    }
                </style>
            </button>
        </div>
    </div>
</div>

<div class="right-screen">
@*
    @*Company Information
    <div class="company-info">
    <style>
    .company-info {
    color: black;
    font-size: 1.563rem;
    position: absolute;
    width: 34.375rem;
    height: 28.5rem;
    top: 28%;
    left: 60%;
    background-color: gray;
    }
    </style>
    </div>

    @* Company Name
    <div class="company-name"> SWMG Corporation
    <style>
    .company-name {
    color: black;
    font-size: 1.563rem;
    position: absolute;
    width: 34.375rem;
    top: 24%;
    left: 60%;
    border: 0.063rem solid #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    </style>
    </div>
*@
@*Try Another Stock
    <button class="try-btn" id="trade-now-btn"> Try This Stock: APPL INC
    <style>
    .try-btn {
    font-size: small;
    position: absolute;
    left: 60%;
    top: 15%;
    align-items: center;
    justify-content: center;
    display: inline-block;
    width: 34.375rem;
    height: 3.125rem;
    background: linear-gradient(to left, #62c08b, #62c08b);
    /*box-shadow: 0 10px 25px #c9aaff;*/
    border-radius: 3.125rem;
    border: none;
    font-size: larger;
    font-weight: 500;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 0.063rem;
    animation: pulsate 1.2s ease-in-out infinite both;
    }

    .try-btn:hover {
    animation-play-state: paused;
    transform: scale(1.05);
    }
    </style>
    </button>
*@
</div>

<style>
    .container {
        display: flex;
    }

    .left-screen {
        margin-right: 0%;
        margin-top: -2%;
    }

    .logo-box {
        width: 8rem;
        height: 8rem;
        background-color: gray;
        position: absolute;
        top: 5%;
        left: 85%;
        border-radius: 0.625rem;
    }

    .card-text {
        top: 4%;
    }

    .try-stock {
        height: 10rem;
        width: 20rem;
        background-color: white;
        border: 1px solid black;
        border-radius: 10%;
        padding: 3rem;
        position: absolute;
        left: 82%;
        top: 25%;
        font-size: xx-small;
    }

    .try-stock2 {
        height: 10rem;
        width: 20rem;
        background-color: white;
        border: 1px solid black;
        border-radius: 10%;
        padding: 3rem;
        position: absolute;
        left: 82%;
        top: 45%;
        font-size: xx-small;
    }

    .logo {
        width: 8rem;
        height: 8rem;
        background-color: gray;
        position: absolute;
        top: 10%;
        left: 55%;
        border-radius: 0.625rem;
        justify-content: center;
        align-items: center;
        font-size: medium;
    }
</style>
</div>
-->


@*Company Name
    <div class="company-name"> SWMG Corporation
    <style>
    .company-name {
    color: black;
    font-size: 1.563rem;
    position: absolute;
    width: 34.375rem;
    top: 24%;
    left: 60%;
    border: 0.063rem solid #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    </style>
    </div>
*@

@*
    @*Company Information
    <div class="company-info">
    <style>
    .company-info {
    color: black;
    font-size: 1.563rem;
    position: absolute;
    width: 34.375rem;
    height: 28.5rem;
    top: 29.2%;
    left: 60%;
    background-color: gray;
    }
    </style>
    </div>
*@
@*
    @*Trade Button
    <button class="trade-btn" id="trade-now-btn">Trade Now
    <style>
    .trade-btn {
    color: red;
    font-size: small;
    position: absolute;
    left: 25%;
    top: 30%;
    align-items: center;
    justify-content: center;
    display: inline-block;
    width: 11.25rem;
    height: 3.125rem;
    background: linear-gradient(to left, #c9aaff, #c9aaff);
    /*box-shadow: 0 10px 25px #c9aaff;*/
    border-radius: 3.125rem;
    border: none;
    font-size: larger;
    font-weight: 500;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 0.063rem;
    animation: pulsate 1.2s ease-in-out infinite both;
    }

    .trade-btn:hover {
    animation-play-state: paused;
    transform: scale(1.05);
    }
    </style>
    @*Script for Blinking Effect -> Not using since its distracting
    <script>
    @* var tradeBtn = document.getElementById('trade-now-btn');
    var scale = 1;
    var direction = 1;
    var intervalId = setInterval(function() {
    scale += direction * 0.005;
    if (scale > 1.1) {
    direction = -1;
    } else if (scale < 1) {
    direction = 1;
    }
    tradeBtn.style.transform = 'scale(' + scale + ')';
    }, 50);

    tradeBtn.addEventListener('mouseenter', function () {
    clearInterval(intervalId);
    this.style.transform = 'scale(1.05)';
    });

    tradeBtn.addEventListener('mouseleave', function () {
    intervalId = setInterval(function() {
    scale += direction * 0.005;
    if (scale > 1.1) {
    direction = -1;
    } else if (scale < 1) {
    direction = 1;
    }
    tradeBtn.style.transform = 'scale(' + scale + ')';
    }, 50);
    });
    </script>
    </button>
*@

@*Try Another Stock (IDEA) -> Clicks and goes to a random stock page
    <button class="try-btn" id="trade-now-btn"> Try This Stock: APPL INC
    <style>
    .try-btn {
    font-size: small;
    position: absolute;
    left: 60%;
    top: 15%;
    align-items: center;
    justify-content: center;
    display: inline-block;
    width: 34.375rem;
    height: 3.125rem;
    background: linear-gradient(to left, #62c08b, #62c08b);
    /*box-shadow: 0 10px 25px #c9aaff;*/
    border-radius: 3.125rem;
    border: none;
    font-size: larger;
    font-weight: 500;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 0.063rem;
    animation: pulsate 1.2s ease-in-out infinite both;
    }

    .try-btn:hover {
    animation-play-state: paused;
    transform: scale(1.05);
    }
    </style>
    </button>
*@

@*Search Bar Place Holder*@
@* <div>
    <input name="title" class="form-control" type="text" list="datalistOptions" id="exampleDataList">
    <datalist class="searchbar" id="datalistOptions">
    </datalist>
    <style>
    .form-control {
    border-radius: 1.25rem;
    border-color: black;
    position: absolute;
    top: 16%;
    width: 0rem;
    height: 2rem;
    length: 2rem;
    left: 1.5%;
    }
    </style>
    <script>
    var wordList = ["This Search Bar Doesnt Work :("];
    var randomIndex = Math.floor(Math.random() * wordList.length);
    var randomWord = wordList[randomIndex];
    var inputElem = document.querySelector('input.form-control');
    var i = 0;
    var intervalId = setInterval(function () {
    if (i < randomWord.length) {
    inputElem.placeholder += randomWord.charAt(i);
    i++;
    } else {
    clearInterval(intervalId);
    }
    }, 100);
    </script>
    </div>
*@